(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2fa4ecc5"],{"02e2":function(t,e,r){"use strict";r("a90d")},"083a":function(t,e,r){"use strict";var n=r("0d51"),i=TypeError;t.exports=function(t,e){if(!delete t[e])throw new i("Cannot delete property "+n(e)+" of "+n(t))}},"159b":function(t,e,r){"use strict";var n=r("cfe9"),i=r("fdbc"),s=r("785a"),a=r("17c2"),o=r("9112"),c=function(t){if(t&&t.forEach!==a)try{o(t,"forEach",a)}catch(e){t.forEach=a}};for(var u in i)i[u]&&c(n[u]&&n[u].prototype);c(s)},"17c2":function(t,e,r){"use strict";var n=r("b727").forEach,i=r("a640"),s=i("forEach");t.exports=s?[].forEach:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}},"2eb9":function(t,e,r){},"3a34":function(t,e,r){"use strict";var n=r("83ab"),i=r("e8b5"),s=TypeError,a=Object.getOwnPropertyDescriptor,o=n&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(t){return t instanceof TypeError}}();t.exports=o?function(t,e){if(i(t)&&!a(t,"length").writable)throw new s("Cannot set read only .length");return t.length=e}:function(t,e){return t.length=e}},"3f02":function(t,e,r){"use strict";r("2eb9")},4160:function(t,e,r){"use strict";var n=r("23e7"),i=r("17c2");n({target:"Array",proto:!0,forced:[].forEach!==i},{forEach:i})},4550:function(t,e,r){"use strict";r("ce0c")},"46db":function(t,e,r){"use strict";r.d(e,"a",(function(){return o})),r.d(e,"b",(function(){return u})),r.d(e,"c",(function(){return d}));r("99af"),r("cb29"),r("d81d"),r("d3b7"),r("3ca3"),r("ddb0");var n=r("2909"),i=(r("96cf"),r("1da1")),s=r("bc3a"),a=r.n(s),o=function(){return a.a.get("/resources/cosmetics.json").then(function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,a.a.get("/resources/skins.json");case 2:return r=t.sent,t.next=5,a.a.get("/resources/newCosmetics.json");case 5:return n=t.sent,t.abrupt("return",e.data.concat(r.data,n.data));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},c=14,u=function(){return new Array(c).fill(0).map((function(t,e){return a.a.get("/resources/pets/".concat(e,".json")).then((function(t){return t.data})).catch((function(){return 1}))}))},d=function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",Promise.all([a.a.get("/resources/sprites.json").then((function(t){e.sprites=t.data[0]})),a.a.get("/resources/class.json").then((function(t){e.classes=t.data})),a.a.get("/resources/items.json").then((function(t){e.items=t.data})),a.a.get("/resources/cosmetics.json").then(function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(r){var n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,a.a.get("/resources/skins.json");case 2:return n=t.sent,t.next=5,a.a.get("/resources/newCosmetics.json");case 5:i=t.sent,e.cosmetics=r.data.concat(n.data,i.data);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())].concat(Object(n["a"])(new Array(c).fill(0).map((function(t,r){return a.a.get("/resources/pets/".concat(r,".json")).then((function(t){e.pets[r]=t.data})).catch((function(){return 1}))}))))));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},5197:function(t,e,r){"use strict";r("b475")},"6e13":function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.loaded?r("main",[t.countdown>0?r("div",{staticClass:"confirmButton"},[r("button",{staticClass:"button is-primary",attrs:{disabled:!0}},[t._v(" "+t._s(t.countdown)+" ")])]):t._e(),r("div",{staticClass:"columns  is-centered is-multiline is-mobile"},[r("div",{staticClass:"column is-10-mobile is-6-tablet is-5-desktop"},[r("UserTrade",{attrs:{info:t.info,items:t.trade[t.user.id],getItemImage:t.getItemImage,confirmed:t.user.confirm,title:"Sua oferta",removeItem:t.removeItem}}),r("br"),r("button",{staticClass:"button is-primary",on:{click:t.confirm}},[t._v(" "+t._s(t.user.confirm?"Cancelar troca":"Confirmar troca")+" ")]),r("SelectTradeItems",{class:t.user.confirm?"is-blocked":"",staticStyle:{"margin-top":"25px"},attrs:{user:t.user,getItemImage:t.getItemImage,addItemToTrade:t.addItemToTrade,info:t.info,map:t.map}})],1),r("div",{staticClass:"column is-10-mobile is-6-tablet is-5-desktop is-offset-0-tablet is-offset-2-desktop"},[r("UserTrade",{attrs:{items:t.getReverseTrade,getItemImage:t.getItemImage,confirmed:t.other.confirm,title:"Oferta dele"}})],1)])]):t._e()},i=[],s=(r("99af"),r("4de4"),r("7db0"),r("c740"),r("d81d"),r("a434"),r("b0c0"),r("2909"));r("a4d3"),r("4160"),r("e439"),r("dbb4"),r("b64b"),r("159b");function a(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function o(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function c(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?o(Object(r),!0).forEach((function(e){a(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}r("96cf");var u=r("1da1"),d=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"trade-offer-container",style:" border: 3px solid "+(t.confirmed?"green":"#e0e0e0")+";"},[r("h3",{staticClass:"offer-title"},[t._v(t._s(t.title))]),r("div",{staticClass:"items-grid"},t._l(3,(function(e){return r("div",{key:"row-"+e,staticClass:"grid-row"},t._l(4,(function(n){return r("div",{key:"cell-"+e+"-"+n,staticClass:"grid-cell",on:{click:function(r){t.removeItem(t.items[t.getItemIndex(e,n)])}}},[t.getItemIndex(e,n)<t.items.length?r("TradeItemCard",{staticStyle:{cursor:"pointer"},attrs:{imageURL:t.getItemImage(t.items[t.getItemIndex(e,n)]),item:t.items[t.getItemIndex(e,n)]}}):r("div",{staticClass:"empty-slot"},[r("div",{staticClass:"placeholder-circle"})])],1)})),0)})),0)])},f=[],m=(r("a9e3"),function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"item-card"},[r("div",{staticClass:"image-container"},[r("img",{staticClass:"item-image",attrs:{src:t.imageURL,alt:""}}),t.item.quantity>1?r("div",{staticClass:"quantity-badge"},[t._v(" "+t._s(t.item.quantity)+" ")]):t._e()]),r("div",{staticClass:"footer",style:"background: "+t.getRarityColor()},[t._v(" "+t._s(t.getRarityName())+" ")]),r("div",{staticClass:"item-name"},[t._v(t._s(t.item.name))])])}),l=[],p={name:"TradeItemCard",props:{imageURL:String,item:Object},methods:{getRarityColor:function(){return["#CDE3FF","#0000FF","#9400D3","#FF9000","#FF0000","linear-gradient(to bottom right, rgba(184, 39, 252, 0.5), rgba(44, 144, 252, 0.5), rgba(184, 253, 51, 0.5), rgba(254, 200, 55, 0.5), rgba(253, 24, 146, 0.5))","#FF00FF"][this.item.rarity]},getRarityName:function(){return["Comum","Raro","Epico","Lendario","Especial","Mitico","Deus"][this.item.rarity]}}},h=p,b=(r("4550"),r("2877")),g=Object(b["a"])(h,m,l,!1,null,"4b949be2",null),y=g.exports,v={name:"TradeOfferComponent",components:{TradeItemCard:y},props:{items:{type:Array,default:function(){return[]}},maxSlots:{type:Number,default:12},getItemImage:{type:Function,required:!0},title:String,confirmed:Boolean,removeItem:Function},methods:{getItemIndex:function(t,e){return 4*(t-1)+(e-1)}}},I=v,w=(r("02e2"),Object(b["a"])(I,d,f,!1,null,"7e994c9f",null)),T=w.exports,C=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("main",[r("br"),r("b-tabs",{staticClass:"is-hidden-mobile",staticStyle:{"margin-bottom":"-20px"},attrs:{type:"is-toggle"},model:{value:t.selectedTab,callback:function(e){t.selectedTab=e},expression:"selectedTab"}},t._l(t.sections,(function(t,e){return r("b-tab-item",{key:e,attrs:{label:t,value:e.toString()}})})),1),r("b-select",{staticClass:"is-hidden-tablet",staticStyle:{"margin-top":"-20px","margin-bottom":"20px"},attrs:{expanded:"",placeholder:"Secione um tipo"},model:{value:t.selectedTab,callback:function(e){t.selectedTab=e},expression:"selectedTab"}},t._l(t.sections,(function(e,n){return r("option",{key:n,attrs:{label:e},domProps:{value:n.toString()}},[t._v(" "+t._s(e)+" ")])})),0),r("div",{staticClass:"columns is-mobile is-multiline"},t._l(t.getSectionItems(t.sections[t.selectedTab]),(function(e,n){return r("div",{key:n,staticClass:"column is-half-mobile is-half-tablet is-one-third-desktop is-one-quarter-fullhd select-item",on:{click:function(r){return t.addItemToTrade(e)}}},[r("TradeItemCard",{attrs:{imageURL:t.getItemImage(e),item:e}})],1)})),0)],1)},O=[],j=["Roosters","Items","Cosmetics","Shards","Pets"],_={name:"SelectTradeItems",props:{user:Object,getItemImage:Function,addItemToTrade:Function,map:Function},components:{TradeItemCard:y},data:function(){return{sections:j,selectedTab:0}},methods:{getSectionItems:function(t){var e=this.map(this.user.roosters,this.user.items,this.user.pets),r=e.filter((function(t){return"item"===t.tradeType}));switch(t){case"Roosters":return e.filter((function(t){return"rooster"===t.tradeType}));case"Pets":return e.filter((function(t){return"pet"===t.tradeType}));case"Items":return r.filter((function(t){return 2===t.type})).filter((function(t){return 6!==t.rarity}));case"Cosmetics":return r.filter((function(t){return 3===t.type}));case"Shards":return r.filter((function(t){return 5===t.type}))}}}},k=_,x=(r("5197"),Object(b["a"])(k,C,O,!1,null,"842b13dc",null)),S=x.exports,E=r("bc3a"),R=r.n(E),F=R.a.create({baseURL:"https://trade.asurabot.com.br"}),P=r("46db"),q={ws:null},D=function t(e,r){var n=new WebSocket("wss://trade.asurabot.com.br/ws?token=".concat(e));return n.onopen=function(){console.log("connected"),n.onclose=function(){console.log("disconnected"),setTimeout((function(){return t(e,r)}),1500)}},n.onerror=function(t){console.log(t)},n.onclose=function(t){console.log(t)},n.onmessage=function(t){r(JSON.parse(t.data))},q.ws=n,q},A={data:function(){return{loaded:!1,token:"",tradeID:null,countdown:0,other:{id:"",confirm:!1},wsConnection:null,user:{id:"teste",confirm:!1,roosters:[],items:[],pets:[]},trade:{},info:{sprites:[],classes:[],items:[],cosmetics:[],pets:[],rarities:["Comum","Raro","Epico","Lendario","Especial","Mitico","Deus"]}}},created:function(){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function e(){var r,n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.$route.query.token,e.next=3,F.get("/user/".concat(n));case 3:return i=e.sent,e.next=6,Object(P["c"])(t.info);case 6:t.trade=(r={},a(r,t.user.id,[]),a(r,t.other.id,[]),r),t.wsConnection=D(n,t.tradeCallback),t.user.id=i.data.id,t.other.id=i.data.other_id,t.user.roosters=i.data.roosters,t.user.items=i.data.items,t.user.pets=i.data.pets,t.loaded=!0;case 14:case"end":return e.stop()}}),e)})))()},computed:{getReverseTrade:function(){return this.trade[this.other.id]}},methods:{confirm:function(){this.user.confirm=!this.user.confirm,this.wsConnection.ws.send(JSON.stringify({type:2,trade_id:this.tradeID,user_id:this.user.id,data:{confirmed:this.user.confirm}}))},mapItems:function(t){var e=t.map((function(t){return c({tradeType:t.type},t.data)})),r=e.filter((function(t){return"rooster"===t.tradeType})),n=e.filter((function(t){return"item"===t.tradeType})),i=e.filter((function(t){return"pet"===t.tradeType})),s=this.map(r,n,i);return s},tradeCallback:function(t){var e=this;switch(this.tradeID||(this.tradeID=t.id),t.type){case"trade_update":var r=t.users[this.user.id],n=t.users[this.other.id];this.user.confirm=r.confirmed,this.other.confirm=n.confirmed,this.$set(this.trade,this.user.id,this.mapItems(r.items)),this.$set(this.trade,this.other.id,this.mapItems(n.items)),this.countdown=0;break;case"start_countdown":this.countdown=t.countdown;var i=setInterval((function(){0!==e.countdown?e.countdown--:clearInterval(i)}),1e3);break;case"trade_confirmed":alert("Trade confirmada"),this.$router.push("/");break;case"trade_error":alert("Erro troca, desconfirme e tente denovo: ".concat(t.error));break}},getItemImage:function(t){switch(t.tradeType){case"rooster":return this.info.sprites[t.type-1];case"pet":return this.info.pets[t.type].sprite;case"item":return 3===t.type?this.info.cosmetics[t.item_id].value:"https://static.thenounproject.com/png/4241034-200.png"}},removeItem:function(t){var e=this.trade[this.user.id],r=e.findIndex((function(e){return e.id===t.id}));-1!==r&&(t.quantity>1?t.quantity--:e.splice(r,1),this.addItemToWs(t,!0))},itemTypeToInt:function(t){switch(t){case"rooster":return 1;case"item":return 0;case"pet":return 2}},addItemToWs:function(t,e){this.wsConnection.ws.send(JSON.stringify({type:1,trade_id:this.tradeID,user_id:this.user.id,data:{item_id:t.id,remove:e,type:this.itemTypeToInt(t.tradeType)}}))},addItemToTrade:function(t){var e=this.trade[this.user.id],r=e.find((function(e){return e.id===t.id}));if(r){if(!r.quantity||r.quantity===t.quantity)return;r.quantity++}else e.push(c(c({},t),{},{quantity:t.quantity?1:void 0}));this.addItemToWs(t,!1)},map:function(t,e,r){var n=this,i=t.map((function(t){return c(c({},t),{},{name:n.info.classes[t.type].name,tradeType:"rooster",rarity:n.info.classes[t.type].rarity})})),a=r.map((function(t){return c(c({},t),{},{name:n.info.pets[t.type].name,tradeType:"pet",rarity:n.info.pets[t.type].rarity})})),o=function(t,e,r,n){return t.filter((function(t){return t.type===e})).map((function(t){return c(c({},t),{},{name:r(t.item_id),tradeType:"item",rarity:n(t.item_id),quantity:t.quantity||1})}))},u=[].concat(Object(s["a"])(o(e,2,(function(t){return n.info.items[t].name}),(function(t){return n.info.items[t].level}))),Object(s["a"])(o(e,3,(function(t){return n.info.cosmetics[t].name}),(function(t){return n.info.cosmetics[t].rarity}))),Object(s["a"])(o(e,5,(function(t){return"Shard "+n.info.rarities[t]}),(function(t){return t}))));return i.concat(u).concat(a)}},components:{UserTrade:T,SelectTradeItems:S}},U=A,$=(r("3f02"),Object(b["a"])(U,n,i,!1,null,"fc587e98",null));e["default"]=$.exports},"7db0":function(t,e,r){"use strict";var n=r("23e7"),i=r("b727").find,s=r("44d2"),a="find",o=!0;a in[]&&Array(1)[a]((function(){o=!1})),n({target:"Array",proto:!0,forced:o},{find:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),s(a)},"81d5":function(t,e,r){"use strict";var n=r("7b0b"),i=r("23cb"),s=r("07fa");t.exports=function(t){var e=n(this),r=s(e),a=arguments.length,o=i(a>1?arguments[1]:void 0,r),c=a>2?arguments[2]:void 0,u=void 0===c?r:i(c,r);while(u>o)e[o++]=t;return e}},a434:function(t,e,r){"use strict";var n=r("23e7"),i=r("7b0b"),s=r("23cb"),a=r("5926"),o=r("07fa"),c=r("3a34"),u=r("3511"),d=r("65f0"),f=r("8418"),m=r("083a"),l=r("1dde"),p=l("splice"),h=Math.max,b=Math.min;n({target:"Array",proto:!0,forced:!p},{splice:function(t,e){var r,n,l,p,g,y,v=i(this),I=o(v),w=s(t,I),T=arguments.length;for(0===T?r=n=0:1===T?(r=0,n=I-w):(r=T-2,n=b(h(a(e),0),I-w)),u(I+r-n),l=d(v,n),p=0;p<n;p++)g=w+p,g in v&&f(l,p,v[g]);if(l.length=n,r<n){for(p=w;p<I-n;p++)g=p+n,y=p+r,g in v?v[y]=v[g]:m(v,y);for(p=I;p>I-n+r;p--)m(v,p-1)}else if(r>n)for(p=I-n;p>w;p--)g=p+n-1,y=p+r-1,g in v?v[y]=v[g]:m(v,y);for(p=0;p<r;p++)v[p+w]=arguments[p+2];return c(v,I-n+r),l}})},a640:function(t,e,r){"use strict";var n=r("d039");t.exports=function(t,e){var r=[][t];return!!r&&n((function(){r.call(null,e||function(){return 1},1)}))}},a90d:function(t,e,r){},b475:function(t,e,r){},b64b:function(t,e,r){"use strict";var n=r("23e7"),i=r("7b0b"),s=r("df75"),a=r("d039"),o=a((function(){s(1)}));n({target:"Object",stat:!0,forced:o},{keys:function(t){return s(i(t))}})},cb29:function(t,e,r){"use strict";var n=r("23e7"),i=r("81d5"),s=r("44d2");n({target:"Array",proto:!0},{fill:i}),s("fill")},ce0c:function(t,e,r){},d81d:function(t,e,r){"use strict";var n=r("23e7"),i=r("b727").map,s=r("1dde"),a=s("map");n({target:"Array",proto:!0,forced:!a},{map:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},dbb4:function(t,e,r){"use strict";var n=r("23e7"),i=r("83ab"),s=r("56ef"),a=r("fc6a"),o=r("06cf"),c=r("8418");n({target:"Object",stat:!0,sham:!i},{getOwnPropertyDescriptors:function(t){var e,r,n=a(t),i=o.f,u=s(n),d={},f=0;while(u.length>f)r=i(n,e=u[f++]),void 0!==r&&c(d,e,r);return d}})},e439:function(t,e,r){"use strict";var n=r("23e7"),i=r("d039"),s=r("fc6a"),a=r("06cf").f,o=r("83ab"),c=!o||i((function(){a(1)}));n({target:"Object",stat:!0,forced:c,sham:!o},{getOwnPropertyDescriptor:function(t,e){return a(s(t),e)}})}}]);